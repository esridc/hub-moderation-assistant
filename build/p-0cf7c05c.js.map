{"version":3,"names":["componentLangToMessageBundleCache","async","getMessageBundle","lang","component","key","fetch","getAssetPath","then","resp","ok","throwMessageFetchError","json","catch","Error","mergeMessages","messages","defaultMessages","messageOverrides","noop","setUpMessages","fetchMessages","effectiveLocale","isBrowser","el","tag","tagName","toLowerCase","componentName","replace","getSupportedLocale","updateMessages","connectMessages","onMessagesChange","defaultOnMessagesChange","disconnectMessages","this"],"sources":["./node_modules/@esri/calcite-components/dist/collection/utils/t9n.js"],"sourcesContent":["/*!\n * All material copyright ESRI, All Rights Reserved, unless otherwise specified.\n * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.\n * v2.11.1\n */\nimport { getAssetPath } from \"@stencil/core\";\nimport { getSupportedLocale } from \"./locale\";\nimport { isBrowser } from \"./browser\";\nexport const componentLangToMessageBundleCache = {};\nasync function getMessageBundle(lang, component) {\n    const key = `${component}_${lang}`;\n    if (componentLangToMessageBundleCache[key]) {\n        return componentLangToMessageBundleCache[key];\n    }\n    componentLangToMessageBundleCache[key] = fetch(getAssetPath(`./assets/${component}/t9n/messages_${lang}.json`))\n        .then((resp) => {\n        if (!resp.ok) {\n            throwMessageFetchError();\n        }\n        return resp.json();\n    })\n        .catch(() => throwMessageFetchError());\n    return componentLangToMessageBundleCache[key];\n}\nfunction throwMessageFetchError() {\n    throw new Error(\"could not fetch component message bundle\");\n}\nfunction mergeMessages(component) {\n    component.messages = {\n        ...component.defaultMessages,\n        ...component.messageOverrides,\n    };\n}\nfunction noop() {\n    // intentionally empty\n}\n/**\n * This utility sets up the messages used by the component. It should be awaited in the `componentWillLoad` lifecycle hook.\n *\n * @param component\n */\nexport async function setUpMessages(component) {\n    component.defaultMessages = await fetchMessages(component, component.effectiveLocale);\n    mergeMessages(component);\n}\nasync function fetchMessages(component, lang) {\n    if (!isBrowser()) {\n        return {};\n    }\n    const { el } = component;\n    const tag = el.tagName.toLowerCase();\n    const componentName = tag.replace(\"calcite-\", \"\");\n    return getMessageBundle(getSupportedLocale(lang, \"t9n\"), componentName);\n}\n/**\n * This utility must be set up for the component to update its default message bundle if the locale changes.\n *\n * It can be set up in **either** of the following ways:\n *\n * 1. called from `LocalizedComponent`'s `onLocaleChange` method or\n * 2. called from a watcher configured to watch `LocalizedComponent`'s `effectiveLocale` prop\n *\n * @param component\n * @param lang\n */\nexport async function updateMessages(component, lang) {\n    component.defaultMessages = await fetchMessages(component, lang);\n    mergeMessages(component);\n}\n/**\n * This utility sets up internals for messages support.\n *\n * It needs to be called in `connectedCallback`\n *\n * **Note**: this must be called after `LocalizedComponent`'s `connectLocalized` method.\n *\n * @param component\n */\nexport function connectMessages(component) {\n    component.onMessagesChange = defaultOnMessagesChange;\n}\n/**\n * This utility tears down internals for messages support.\n *\n * It needs to be called in `disconnectedCallback`\n *\n * @param component\n */\nexport function disconnectMessages(component) {\n    // we set this to noop to for watchers triggered when components are disconnected\n    component.onMessagesChange = noop;\n}\nfunction defaultOnMessagesChange() {\n    mergeMessages(this);\n}\n//# sourceMappingURL=t9n.js.map\n"],"mappings":";;;;;GAQO,MAAMA,EAAoC,GACjDC,eAAeC,EAAiBC,EAAMC,GAClC,MAAMC,EAAM,GAAGD,KAAaD,IAC5B,GAAIH,EAAkCK,GAAM,CACxC,OAAOL,EAAkCK,EACjD,CACIL,EAAkCK,GAAOC,MAAMC,EAAa,YAAYH,kBAA0BD,WAC7FK,MAAMC,IACP,IAAKA,EAAKC,GAAI,CACVC,GACZ,CACQ,OAAOF,EAAKG,MAAM,IAEjBC,OAAM,IAAMF,MACjB,OAAOX,EAAkCK,EAC7C,CACA,SAASM,IACL,MAAM,IAAIG,MAAM,2CACpB,CACA,SAASC,EAAcX,GACnBA,EAAUY,SAAW,IACdZ,EAAUa,mBACVb,EAAUc,iBAErB,CACA,SAASC,IAET,CAMOlB,eAAemB,EAAchB,GAChCA,EAAUa,sBAAwBI,EAAcjB,EAAWA,EAAUkB,iBACrEP,EAAcX,EAClB,CACAH,eAAeoB,EAAcjB,EAAWD,GACpC,IAAKoB,IAAa,CACd,MAAO,EACf,CACI,MAAMC,GAAEA,GAAOpB,EACf,MAAMqB,EAAMD,EAAGE,QAAQC,cACvB,MAAMC,EAAgBH,EAAII,QAAQ,WAAY,IAC9C,OAAO3B,EAAiB4B,EAAmB3B,EAAM,OAAQyB,EAC7D,CAYO3B,eAAe8B,EAAe3B,EAAWD,GAC5CC,EAAUa,sBAAwBI,EAAcjB,EAAWD,GAC3DY,EAAcX,EAClB,CAUO,SAAS4B,EAAgB5B,GAC5BA,EAAU6B,iBAAmBC,CACjC,CAQO,SAASC,EAAmB/B,GAE/BA,EAAU6B,iBAAmBd,CACjC,CACA,SAASe,IACLnB,EAAcqB,KAClB,Q"}