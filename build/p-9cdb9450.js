import{g as t}from"./p-22ac229a.js";import{i as s,d as i,t as e}from"./p-416f7088.js";import{S as n}from"./p-d073e251.js";import{d as r}from"./p-58421494.js";import{h as o,H as a}from"./p-3e4c4fe7.js";import{I as c}from"./p-529ac440.js";import{C as l,S as f}from"./p-c752e732.js";
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.11.1
 */function u(){this.setUpItems();this.setUpFilter();this.deselectRemovedItems()}const h=["ArrowUp","ArrowDown"];function m(){this.setUpItems();this.setUpFilter();this.emitCalciteListChange=r(C.bind(this),0);this.emitCalciteListFilter=r(y.bind(this),0)}function d(){this.mutationObserver?.observe(this.el,{childList:true,subtree:true})}function p(){this.mutationObserver?.disconnect()}function b(t){const{selectedValues:i}=this;const{item:e,value:n,selected:r,shiftPressed:o}=t.detail;if(r){if(this.multiple&&o){this.selectSiblings(e)}if(!this.multiple){this.deselectSiblingItems(e)}i.set(n,e)}else{i.delete(n);if(this.multiple&&o){this.selectSiblings(e,true)}}if(!this.multiple){I(e,r);if(r){s(e)}}this.lastSelectedItem=e;this.emitCalciteListChange()}function g(t){const s=t.detail.oldValue;const i=this.selectedValues;if(i.has(s)){const e=i.get(s);i.delete(s);i.set(t.detail.newValue,e)}t.stopPropagation()}function v(t){return!!h.find((s=>s===t))}function w(t){const{el:s,items:i,multiple:e,selectedValues:n}=this;if(e){return}const r=s.contains(t.relatedTarget);if(r){return}x(i).forEach((s=>{I(s,n.size===0?s.contains(t.target)||t.target===s:s.selected)}))}function F(t){const{key:i,target:e}=t;if(!v(i)){return}const{items:n,multiple:r,selectionFollowsFocus:o}=this;const{length:a}=n;const c=n.indexOf(e);if(!a||c===-1){return}t.preventDefault();const l=j(this,e,i==="ArrowUp"?"up":"down");const f=n[l];n.forEach((t=>I(t,t===f)));if(!r&&o){f.selected=true}s(f)}function j(s,i,e){const{items:n}=s;const{length:r}=n;const o=n.indexOf(i);const a=e==="up"?-1:1;let c=1;let l=t(o+a*c++,r);const f=l;while(n[l].disabled){l=t(o+a*c++,r);if(l===f){break}}return l}function A(t,s){const{items:i}=t;return i.indexOf(s)}function x(t){return t.filter((t=>!t.disabled))}function y(){this.calciteListFilter.emit()}function C(){this.calciteListChange.emit(this.selectedValues)}function E(t){if(t.defaultPrevented){return}const s=t.target;const i=this.selectedValues;if(s.parentElement.tagName==="CALCITE-PICK-LIST-GROUP"&&s.slot===n.parentItem){s.parentElement.remove();Array.from(s.parentElement.children).forEach((t=>i.delete(t.value)))}else{s.remove();i.delete(s.value)}this.emitCalciteListChange()}function I(t,s){if(t.disabled){return}if(s){t.removeAttribute("tabindex")}else{t.setAttribute("tabindex","-1")}}async function k(t){if(this.filterEnabled&&t==="filter"){await s(this.filterEl);return}const{items:i,multiple:e,selectionFollowsFocus:n}=this;if(i.length===0){return}if(e){return x(i)[0]?.setFocus()}const r=x(i);const o=r.find((t=>t.selected))||r[0];if(n&&o){o.selected=true}return o.setFocus()}function L(t){this.items=Array.from(this.el.querySelectorAll(t));let s=false;const{items:i}=this;i.forEach((t=>{t.icon=this.getIconType();if(!this.multiple){t.deselectDisabled=true;I(t,false)}if(t.selected){s=true;I(t,true);this.selectedValues.set(t.value,t)}}));const[e]=i;if(!s&&e&&!e.disabled){I(e,true)}}function P(){const t=this.selectedValues;const s=this.items.map((({value:t})=>t));t.forEach((t=>{if(!s.includes(t.value)){this.selectedValues.delete(t.value)}}))}function S(t){this.items.forEach((s=>{if(s.value!==t.value){s.toggleSelected(false);if(this.selectedValues.has(s.value)){this.selectedValues.delete(s.value)}}}))}function T(t,s=false){if(!this.lastSelectedItem){return}const{items:i}=this;const e=i.findIndex((t=>t.value===this.lastSelectedItem.value));const n=i.findIndex((s=>s.value===t.value));i.slice(Math.min(e,n),Math.max(e,n)).forEach((t=>{t.toggleSelected(!s);if(!s){this.selectedValues.set(t.value,t)}else{this.selectedValues.delete(t.value)}}))}let U;function D(t=false){const{filteredData:s,filterText:e}=this;const n=s.map((t=>t.value));let r=false;if(!U){U=new Set}const o=this.items?.filter((t=>{const s=t.parentElement;const i=s.matches("calcite-pick-list-group");if(i){U.add(s)}const o=e?n.includes(t.value):true;t.hidden=!o;if(!r){r=o&&t.selected}return o}))||[];U.forEach((t=>{const s=o.some((s=>t.contains(s)));t.hidden=!s;if(!s){return}const e=i(t,"parent-item");if(e){e.hidden=false;if(o.includes(e)){Array.from(t.children).forEach((t=>t.hidden=false))}}}));U.clear();if(o.length>0&&!r&&!this.multiple){I(o[0],true)}this.setFilteredItems(o);if(t){this.emitCalciteListFilter()}}function M(){const t=this.filterEl?.filteredItems;if(t){this.filteredData=t}this.handleFilter()}function V(t){t.stopPropagation();const{filteredItems:s,value:i}=t.currentTarget;this.filterText=i;this.filteredData=s;this.handleFilter(true)}function q(){return this.items.map((t=>({label:t.label,description:t.description,metadata:t.metadata,value:t.value})))}
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.11.1
 */const G=({props:{disabled:t,loading:s,filterEnabled:i,dataForFilter:n,handleFilterEvent:r,filterPlaceholder:u,filterText:h,setFilterEl:m,dragEnabled:d,storeAssistiveEl:p},...b})=>{const g=o("slot",null);return o(a,{"aria-busy":e(s),role:"menu",...b},o(c,{disabled:t},o("section",null,d?o("span",{"aria-live":"assertive",class:"assistive-text",ref:p}):null,o("header",{class:{[l.sticky]:true}},i?o("calcite-filter",{"aria-label":u,disabled:t,items:n,onCalciteFilterChange:r,placeholder:u,ref:m,value:h}):null,o("slot",{name:f.menuActions})),s?o("calcite-scrim",{loading:s}):null,g)))};export{G as L,S as a,V as b,d as c,P as d,p as e,M as f,q as g,D as h,m as i,b as j,F as k,g as l,u as m,w as n,L as o,k as p,A as q,E as r,T as s,j as t};
//# sourceMappingURL=p-9cdb9450.js.map